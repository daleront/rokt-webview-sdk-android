steps:
  - input: ':whale: Release to Maven'
    prompt: Confirm releasing this version to Maven?
    key: block-release-maven
  - name: ':speech_balloon: Notify Maven repository deployment start'
    depends_on: block-release-maven
    command:
      - curl -v -X POST -H "Content-Type: application/json" --data "{\"text\": \"This is a message\"}" "${CHAT_WEBHOOK}&threadKey=${BUILDKITE_COMMIT}"
    plugins:
      - seek-oss/aws-sm#v2.0.0:
          env:
            NOTIFICATION_ENDPOINT:
              secret-id: stage-android-webviewsdk-buildkite
              json-key: .NOTIFICATION_ENDPOINT
            CHAT_WEBHOOK:
              secret-id: stage-android-webviewsdk-buildkite
              json-key: .CHAT_WEBHOOK
    agents:
      queue: stage-us-west-2-default
